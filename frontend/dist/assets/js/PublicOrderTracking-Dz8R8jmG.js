import{j as s,l as e}from"./index-BqsYehSy.js";import{r as a}from"./ui-vendor-X7YeR1nJ.js";import"./react-vendor-BTlmOg1k.js";import"./export-jspdf-ClKeqeik.js";import"./state-CRAppeNE.js";import"./export-xlsx-C5xT2hrF.js";const i={NEW:{label:"Siparis Alindi",step:1},PREPARED:{label:"Uretime Hazirlaniyor",step:2},OPTI_RUNNING:{label:"Optimizasyonda",step:3},IN_PRODUCTION:{label:"Uretimde",step:4},WAITING_ASSEMBLY:{label:"Montaj Bekliyor",step:5},READY:{label:"Teslimata Hazir",step:6},DELIVERED:{label:"Teslim Edildi",step:7},CANCELLED:{label:"Iptal Edildi",step:-1}};function r({token:r}){const[l,t]=a.useState(null),[n,c]=a.useState(!0),[d,o]=a.useState(null);if(a.useEffect(()=>{(async()=>{try{const s=await fetch(`${e()}/public/track/${r}`);if(!s.ok)throw new Error("Siparis bulunamadi veya gecersiz takip kodu.");const a=await s.json();t(a)}catch(s){o(s.message)}finally{c(!1)}})()},[r]),n)return s.jsxs("div",{className:"public-tracking-container loading",children:[s.jsx("div",{className:"spinner"}),s.jsx("p",{children:"Siparis durumu sorgulaniyor..."})]});if(d||!l)return s.jsxs("div",{className:"public-tracking-container error",children:[s.jsx("h2",{children:"OptiPlan360 - Siparis Takip"}),s.jsx("div",{className:"error-box",children:s.jsx("p",{children:d||"Bilinmeyen bir hata olustu"})})]});const p=i[l.status]||{label:l.status,step:0},m=p.step;return s.jsx("div",{className:"public-tracking-container",children:s.jsxs("div",{className:"tracking-card",children:[s.jsxs("div",{className:"tracking-header",children:[s.jsx("h2",{children:"OptiPlan360 - Siparis Takip"}),s.jsx("p",{className:"order-code",children:l.ts_code})]}),s.jsxs("div",{className:"customer-info",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Musteri:"})," ",l.customer_snapshot]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Tarih:"})," ",new Date(l.created_at).toLocaleDateString("tr-TR")]})]}),s.jsxs("div",{className:"order-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{children:"Malzeme"}),s.jsxs("strong",{children:[l.material_name," (",l.thickness_mm,"mm)"]})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{children:"Renk"}),s.jsx("strong",{children:l.color})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{children:"Parca Sayisi"}),s.jsxs("strong",{children:[l.total_parts," adet"]})]})]}),s.jsxs("div",{className:"progress-container",children:[s.jsx("div",{className:"progress-bar-bg",children:s.jsx("div",{className:"progress-bar-fill",style:{width:(m>0?m/7*100:0)+"%",backgroundColor:-1===m?"red":""}})}),s.jsxs("div",{className:"progress-status",children:["Durum: ",s.jsx("strong",{children:p.label})]})]})]})})}export{r as default};
