import{C as e,j as i,c as a,f as t,R as s,I as l,B as r,m as n,h as o}from"./index-BqsYehSy.js";import{r as d,e as c,K as m,N as x,o as p,am as g,S as y,an as u,al as h,q as b,p as f}from"./ui-vendor-X7YeR1nJ.js";import"./react-vendor-BTlmOg1k.js";import"./export-jspdf-ClKeqeik.js";import"./state-CRAppeNE.js";import"./export-xlsx-C5xT2hrF.js";const j=[{id:"chat",label:"Sohbet",icon:i.jsx(f,{size:14})},{id:"analysis",label:"Analiz",icon:i.jsx(p,{size:14})},{id:"search",label:"Akıllı Arama",icon:i.jsx(y,{size:14})},{id:"image",label:"Görüntü Analizi",icon:i.jsx(u,{size:14})},{id:"document",label:"Doküman Analizi",icon:i.jsx(b,{size:14})}],z=[{value:"general",label:"Genel Durum"},{value:"orders",label:"Sipariş Analizi"},{value:"customers",label:"Müşteri Analizi"},{value:"inventory",label:"Stok Analizi"}],v=[{value:"all",label:"Tümü"},{value:"orders",label:"Siparişler"},{value:"customers",label:"Müşteriler"},{value:"products",label:"Ürünler"}],S=[{value:"general",label:"Genel"},{value:"invoice",label:"Fatura"},{value:"contract",label:"Sözleşme"},{value:"report",label:"Rapor"},{value:"price_list",label:"Fiyat Listesi"}],k={background:e.surface,border:`1px solid ${e.border}`,borderRadius:s.lg,padding:20};function A(){const[f,A]=d.useState("chat"),[B,C]=d.useState([]),[D,T]=d.useState(""),[I,w]=d.useState(!1),[O,W]=d.useState(null),[E,R]=d.useState("general"),[G,F]=d.useState(""),[P,L]=d.useState("all"),[$,N]=d.useState(null),[_,M]=d.useState(""),[U,J]=d.useState(""),[K,q]=d.useState("general"),V=async()=>{w(!0),W(null);try{await o("/assistant/analyze-business-data",{method:"POST",body:JSON.stringify({analysis_type:E})}),W({type:"success",text:"İş verileriniz başarıyla analiz edildi."})}catch(e){W({type:"error",text:e instanceof Error?e.message:"Analiz yapılamadı"})}finally{w(!1)}},Y="success"===(null==O?void 0:O.type)?{bg:"rgba(16,185,129,0.12)",border:"rgba(16,185,129,0.35)",color:e.success.DEFAULT}:{bg:"rgba(239,68,68,0.12)",border:"rgba(239,68,68,0.35)",color:e.error.DEFAULT};return i.jsxs("div",{className:"electric-page",children:[i.jsx(a,{title:"AI Asistan",subtitle:"Gemini AI destekli akıllı asistan",breadcrumbs:["Orkestrasyon","AI Asistan"],children:i.jsxs(t,{variant:"success",children:[i.jsx(c,{size:12,style:{marginRight:4}}),"Aktif"]})}),i.jsxs("div",{className:"app-page-container",style:{display:"grid",gap:16,alignContent:"start"},children:[O&&i.jsx("div",{role:"error"===O.type?"alert":"status",style:{border:`1px solid ${Y.border}`,background:Y.bg,color:Y.color,borderRadius:s.md,padding:"10px 12px",fontSize:13},children:O.text}),i.jsx("div",{style:{display:"flex",gap:4,borderBottom:`1px solid ${e.border}`,paddingBottom:0},children:j.map(a=>{const t=f===a.id;return i.jsxs("button",{onClick:()=>A(a.id),style:{display:"flex",alignItems:"center",gap:6,padding:"8px 14px",fontSize:13,fontWeight:t?600:400,background:"none",border:"none",borderBottom:t?`2px solid ${e.primary.DEFAULT}`:"2px solid transparent",color:t?e.primary.DEFAULT:e.muted,cursor:"pointer",marginBottom:-1},children:[a.icon,a.label]},a.id)})}),"chat"===f&&i.jsxs("div",{style:k,children:[i.jsx("div",{style:{fontWeight:600,fontSize:15,marginBottom:4},children:"AI Asistan Sohbet"}),i.jsx("div",{style:{fontSize:12,color:e.muted,marginBottom:12},children:"OptiPlan 360 hakkında sorular sorun, yardım isteyin veya fikir alın"}),i.jsxs("div",{style:{height:400,overflowY:"auto",border:`1px solid ${e.border}`,borderRadius:s.md,padding:12,marginBottom:12,display:"flex",flexDirection:"column",gap:10},children:[0===B.length&&i.jsx("div",{style:{color:e.muted,fontSize:13,textAlign:"center",marginTop:80},children:"Merhaba! Size nasıl yardımcı olabilirim?"}),B.map(a=>i.jsx("div",{style:{display:"flex",justifyContent:"user"===a.role?"flex-end":"flex-start"},children:i.jsxs("div",{style:{maxWidth:"70%",borderRadius:s.lg,padding:"8px 12px",fontSize:13,background:"user"===a.role?e.primary.DEFAULT:e.bg.elevated,color:"user"===a.role?"#fff":e.text},children:[i.jsx("div",{children:a.content}),i.jsx("div",{style:{fontSize:11,opacity:.7,marginTop:4},children:new Date(a.timestamp).toLocaleTimeString("tr-TR")})]})},a.id)),I&&i.jsx("div",{style:{display:"flex",justifyContent:"flex-start"},children:i.jsx("div",{style:{background:e.bg.elevated,borderRadius:s.lg,padding:"8px 12px"},children:i.jsx(m,{size:16,style:{animation:"spin 1s linear infinite"}})})})]}),i.jsxs("div",{style:{display:"flex",gap:8},children:[i.jsx("div",{style:{flex:1},children:i.jsx(l,{value:D,onChange:e=>T(e.target.value),placeholder:"Mesajınızı yazın...",onFocus:void 0})}),i.jsx(r,{icon:i.jsx(x,{size:14}),onClick:()=>{(async()=>{if(!D.trim())return;const e={id:Date.now().toString(),role:"user",content:D,timestamp:(new Date).toISOString()};C(i=>[...i,e]),T(""),w(!0),W(null);try{const i=await o("/assistant/chat",{method:"POST",body:JSON.stringify({messages:[...B,e],system_instruction:"Sen OptiPlan 360 AI asistanısın. Kullanıcıya profesyonel ve yardımcı ol."})});C(e=>[...e,{id:(Date.now()+1).toString(),role:"assistant",content:i.response,timestamp:(new Date).toISOString()}])}catch(i){W({type:"error",text:i instanceof Error?i.message:"AI yanıt üretilemedi"})}finally{w(!1)}})()},disabled:I||!D.trim(),loading:I,children:"Gönder"})]})]}),"analysis"===f&&i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16},children:[i.jsxs("div",{style:k,children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontWeight:600,fontSize:15,marginBottom:4},children:[i.jsx(p,{size:16}),"İş Veri Analizi"]}),i.jsx("div",{style:{fontSize:12,color:e.muted,marginBottom:16},children:"OptiPlan 360 verilerinizi AI ile analiz edin"}),i.jsx("div",{style:{marginBottom:12},children:i.jsx(n,{value:E,onChange:e=>R(String(e)),options:z,label:"Analiz Tipi"})}),i.jsx(r,{icon:I?i.jsx(m,{size:14}):i.jsx(p,{size:14}),onClick:()=>{V()},disabled:I,loading:I,fullWidth:!0,children:"Analiz Et"})]}),i.jsxs("div",{style:k,children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontWeight:600,fontSize:15,marginBottom:4},children:[i.jsx(g,{size:16}),"Kişiselleştirilmiş Öneriler"]}),i.jsx("div",{style:{fontSize:12,color:e.muted,marginBottom:16},children:"Size özel öneriler ve ipuçları alın"}),i.jsx(r,{icon:I?i.jsx(m,{size:14}):i.jsx(g,{size:14}),onClick:()=>{V()},disabled:I,loading:I,fullWidth:!0,children:"Öneriler Al"})]})]}),"search"===f&&i.jsxs("div",{style:k,children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontWeight:600,fontSize:15,marginBottom:4},children:[i.jsx(y,{size:16}),"Akıllı Arama"]}),i.jsx("div",{style:{fontSize:12,color:e.muted,marginBottom:16},children:"OptiPlan 360 verilerinde akıllı arama yapın"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto auto",gap:8,alignItems:"end"},children:[i.jsx(l,{value:G,onChange:e=>F(e.target.value),placeholder:"Aramak istediğiniz kelimeyi yazın..."}),i.jsx(n,{value:P,onChange:e=>L(String(e)),options:v,ariaLabel:"Arama kapsamı",containerStyle:{minWidth:140}}),i.jsx(r,{icon:I?i.jsx(m,{size:14}):i.jsx(y,{size:14}),onClick:()=>{(async()=>{if(G.trim()){w(!0),W(null);try{await o("/assistant/smart-search",{method:"POST",body:JSON.stringify({query:G,search_scope:P})}),W({type:"success",text:"Arama tamamlandı."})}catch(e){W({type:"error",text:e instanceof Error?e.message:"Arama yapılamadı"})}finally{w(!1)}}})()},disabled:I||!G.trim(),loading:I,children:"Ara"})]})]}),"image"===f&&i.jsxs("div",{style:k,children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontWeight:600,fontSize:15,marginBottom:4},children:[i.jsx(u,{size:16}),"Görüntü Analizi"]}),i.jsx("div",{style:{fontSize:12,color:e.muted,marginBottom:16},children:"Görüntüleri AI ile analiz edin"}),i.jsxs("div",{style:{display:"grid",gap:12},children:[i.jsxs("label",{children:[i.jsx("div",{style:{fontSize:12,fontWeight:600,marginBottom:4},children:"Görüntü Dosyası"}),i.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var i;return N((null==(i=e.target.files)?void 0:i[0])??null)},style:{display:"block",width:"100%",padding:"8px 10px",borderRadius:s.md,border:`1px solid ${e.border}`,background:e.surface,color:e.text,fontSize:13}})]}),i.jsxs("label",{children:[i.jsx("div",{style:{fontSize:12,fontWeight:600,marginBottom:4},children:"Analiz Talimatı"}),i.jsx("textarea",{value:_,onChange:e=>M(e.target.value),placeholder:"Bu görüntü hakkında ne öğrenmek istiyorsunuz?",rows:3,style:{width:"100%",padding:"8px 10px",borderRadius:s.md,border:`1px solid ${e.border}`,background:e.surface,color:e.text,fontSize:13,resize:"vertical",boxSizing:"border-box"}})]}),i.jsx(r,{icon:I?i.jsx(m,{size:14}):i.jsx(h,{size:14}),onClick:()=>{(async()=>{if($&&_.trim()){w(!0),W(null);try{const e=new FormData;e.append("file",$),e.append("prompt",_),await o("/assistant/analyze-image",{method:"POST",body:e}),W({type:"success",text:"Görüntü başarıyla analiz edildi."})}catch(e){W({type:"error",text:e instanceof Error?e.message:"Görüntü analizi yapılamadı"})}finally{w(!1)}}})()},disabled:I||!$||!_.trim(),loading:I,children:"Görüntüyü Analiz Et"})]})]}),"document"===f&&i.jsxs("div",{style:k,children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontWeight:600,fontSize:15,marginBottom:4},children:[i.jsx(b,{size:16}),"Doküman Analizi"]}),i.jsx("div",{style:{fontSize:12,color:e.muted,marginBottom:16},children:"Fatura, sözleşme, rapor gibi dokümanları analiz edin"}),i.jsxs("div",{style:{display:"grid",gap:12},children:[i.jsxs("label",{children:[i.jsx("div",{style:{fontSize:12,fontWeight:600,marginBottom:4},children:"Doküman Metni"}),i.jsx("textarea",{value:U,onChange:e=>J(e.target.value),placeholder:"Analiz edilecek doküman metnini buraya yapıştırın...",rows:6,style:{width:"100%",padding:"8px 10px",borderRadius:s.md,border:`1px solid ${e.border}`,background:e.surface,color:e.text,fontSize:13,resize:"vertical",boxSizing:"border-box"}})]}),i.jsx(n,{value:K,onChange:e=>q(String(e)),options:S,label:"Doküman Tipi"}),i.jsx(r,{icon:I?i.jsx(m,{size:14}):i.jsx(b,{size:14}),onClick:()=>{(async()=>{if(U.trim()){w(!0),W(null);try{await o("/assistant/analyze-document",{method:"POST",body:JSON.stringify({document_text:U,document_type:K})}),W({type:"success",text:"Doküman başarıyla analiz edildi."})}catch(e){W({type:"error",text:e instanceof Error?e.message:"Doküman analizi yapılamadı"})}finally{w(!1)}}})()},disabled:I||!U.trim(),loading:I,children:"Dokümanı Analiz Et"})]})]})]}),i.jsx("style",{children:"@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }"})]})}export{A as default};
