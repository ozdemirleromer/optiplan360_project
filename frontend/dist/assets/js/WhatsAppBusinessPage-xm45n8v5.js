import{e,j as t,c as i,B as s,T as n,C as r,R as a,d as l,K as o,p as d}from"./index-BqsYehSy.js";import{r as c,Y as p,e as u,Q as x,o as g,t as h,N as m,q as y,T as b,ad as f,ac as j,y as v,c as S,E as z,ai as A}from"./ui-vendor-X7YeR1nJ.js";import"./react-vendor-BTlmOg1k.js";import"./export-jspdf-ClKeqeik.js";import"./state-CRAppeNE.js";import"./export-xlsx-C5xT2hrF.js";const T={SENT:{bg:r.success.light,color:r.success.DEFAULT,label:"Gönderildi"},FAILED:{bg:r.danger.light,color:r.danger.DEFAULT,label:"Başarısız"},PENDING:{bg:r.warning.light,color:r.warning.DEFAULT,label:"Bekliyor"}},w=[{id:"overview",label:"Genel Bakış",icon:t.jsx(g,{size:16,"aria-hidden":"true"})},{id:"config",label:"Yapılandırma",icon:t.jsx(h,{size:16,"aria-hidden":"true"})},{id:"send",label:"Mesaj Gönder",icon:t.jsx(m,{size:16,"aria-hidden":"true"})},{id:"history",label:"Mesaj Geçmişi",icon:t.jsx(y,{size:16,"aria-hidden":"true"})}];function k(){const[l,o]=c.useState("overview"),[d,g]=c.useState(!0),[h,m]=c.useState(null),[y,b]=c.useState(null),[f,j]=c.useState([]),[v,S]=c.useState([]),[z,A]=c.useState(null),T=c.useRef(null),k=c.useCallback((e,t)=>{A({type:e,text:t}),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>A(null),4e3)},[]),B=c.useCallback(async()=>{g(!0);try{const[t,i,s,n]=await Promise.allSettled([e.getWhatsAppConfig(),e.getWhatsAppSummary(),e.listWhatsAppTemplates(),e.listWhatsAppMessages()]);if("fulfilled"===t.status&&m(t.value),"fulfilled"===i.status){const e=i.value;b({configured:e.configured,totalSent:e.totalSent,todaySent:e.todaySent,failed:e.failed})}"fulfilled"===s.status&&j(s.value),"fulfilled"===n.status&&S(n.value.map(e=>({id:String(e.id??""),toPhone:String(e.toPhone??""),message:String(e.message??""),status:String(e.status??""),wabaMessageId:e.wabaMessageId?String(e.wabaMessageId):void 0,orderId:e.orderId?String(e.orderId):void 0,orderTsCode:e.orderTsCode?String(e.orderTsCode):void 0,sentBy:String(e.sentBy??""),sentAt:String(e.sentAt??""),error:e.error?String(e.error):void 0})))}catch{k("error","Veriler yüklenirken hata oluştu")}finally{g(!1)}},[k]);return c.useEffect(()=>{B()},[B]),c.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]),t.jsxs("div",{className:"electric-page",style:{display:"flex",flexDirection:"column",height:"100%"},children:[t.jsx(i,{title:"WhatsApp Business",subtitle:"Meta WABA Entegrasyonu",breadcrumbs:["Ayarlar","Entegrasyonlar","WhatsApp Business"],children:t.jsx(s,{variant:"ghost",onClick:()=>{B()},icon:t.jsx(p,{size:14,"aria-hidden":"true"}),title:"Yenile",children:"Yenile"})}),z&&t.jsxs("div",{role:"alert",style:{position:"fixed",top:16,right:16,zIndex:9999,padding:"12px 20px",borderRadius:a.md,background:"success"===z.type?r.success.DEFAULT:r.danger.DEFAULT,color:"#fff",fontSize:13,fontWeight:n.fontWeight.semibold,boxShadow:"0 8px 24px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",gap:8,animation:"slideInRight 0.3s ease"},children:["success"===z.type?t.jsx(u,{size:16}):t.jsx(x,{size:16}),z.text]}),t.jsx("div",{className:"app-page-container",style:{paddingTop:0,paddingBottom:0},children:t.jsx("div",{role:"tablist","aria-label":"WhatsApp Business sekmeleri",style:{display:"flex",gap:4,borderBottom:`1px solid ${r.border}`,overflowX:"auto"},children:w.map(e=>t.jsxs("button",{role:"tab","aria-selected":l===e.id,onClick:()=>o(e.id),style:{display:"flex",alignItems:"center",gap:6,padding:"10px 16px",background:"transparent",border:"none",borderBottom:`2px solid ${l===e.id?r.primary.DEFAULT:"transparent"}`,color:l===e.id?r.primary.DEFAULT:r.muted,fontWeight:l===e.id?n.fontWeight.semibold:n.fontWeight.normal,fontSize:13,cursor:"pointer",transition:"all 0.15s ease",whiteSpace:"nowrap",fontFamily:n.fontFamily.base},children:[e.icon,e.label]},e.id))})}),t.jsx("div",{className:"app-page-container",style:{flex:1,overflowY:"auto",paddingTop:16},children:d?t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:200,color:r.muted,gap:8},children:[t.jsx("div",{className:"loading-spinner"}),"Yükleniyor..."]}):t.jsxs(t.Fragment,{children:["overview"===l&&t.jsx(F,{summary:y,config:h,messages:v}),"config"===l&&t.jsx(I,{config:h,onSave:async t=>{try{const i=await e.updateWhatsAppConfig({phone_number_id:t.phoneNumberId,business_account_id:t.businessAccountId,access_token:t.accessToken,api_version:t.apiVersion});m(i),k("success","Yapılandırma kaydedildi")}catch{k("error","Yapılandırma kaydedilemedi")}}}),"send"===l&&t.jsx(E,{templates:f,configured:(null==h?void 0:h.configured)??!1,onSent:async()=>{k("success","Mesaj gönderildi"),await B()},onError:e=>k("error",e)}),"history"===l&&t.jsx(D,{messages:v,onRefresh:B})]})}),t.jsx("style",{children:"\n        @keyframes slideInRight {\n          from { opacity: 0; transform: translateX(30px); }\n          to { opacity: 1; transform: translateX(0); }\n        }\n      "})]})}function F({summary:e,config:i,messages:s}){const d=(null==i?void 0:i.configured)??!1;return t.jsxs("div",{style:{display:"grid",gap:20},children:[t.jsxs(l,{title:"Bağlantı Durumu",icon:t.jsx(f,{size:14,"aria-hidden":"true"}),children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:d?r.success.DEFAULT:r.danger.DEFAULT,boxShadow:d?`0 0 8px ${r.success.DEFAULT}`:`0 0 8px ${r.danger.DEFAULT}`}}),t.jsx("span",{style:{fontSize:14,fontWeight:n.fontWeight.semibold,color:r.text},children:d?"Aktif — Meta WABA bağlantısı hazır":"Yapılandırılmamış — Bağlantı ayarları eksik"})]}),!d&&t.jsxs("div",{style:{marginTop:12,padding:"10px 14px",borderRadius:a.md,background:r.warning.light,color:r.warning.DEFAULT,fontSize:12,display:"flex",alignItems:"center",gap:8},children:[t.jsx(b,{size:14}),"WhatsApp API bağlantısı için Yapılandırma sekmesinden Phone Number ID ve Access Token giriniz."]})]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16},children:[t.jsx(o,{icon:t.jsx(m,{size:16,"aria-hidden":"true"}),label:"Toplam Gönderilen",value:(null==e?void 0:e.totalSent)??0,color:r.primary.DEFAULT}),t.jsx(o,{icon:t.jsx(j,{size:16,"aria-hidden":"true"}),label:"Bugün Gönderilen",value:(null==e?void 0:e.todaySent)??0,color:r.success.DEFAULT}),t.jsx(o,{icon:t.jsx(x,{size:16,"aria-hidden":"true"}),label:"Başarısız",value:(null==e?void 0:e.failed)??0,color:r.danger.DEFAULT}),t.jsx(o,{icon:t.jsx(u,{size:16,"aria-hidden":"true"}),label:"Başarı Oranı",value:e&&e.totalSent>0?`%${Math.round((e.totalSent-e.failed)/e.totalSent*100)}`:"%0",color:r.accent.DEFAULT})]}),t.jsx(l,{title:"Son Mesajlar",icon:t.jsx(v,{size:14,"aria-hidden":"true"}),children:0===s.length?t.jsx("p",{style:{color:r.muted,fontSize:13,margin:0},children:"Henüz mesaj gönderilmemiş."}):t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[t.jsx("thead",{children:t.jsx("tr",{children:["Telefon","Durum","Gönderen","Tarih","Mesaj"].map(e=>t.jsx("th",{style:{textAlign:"left",padding:"8px 10px",borderBottom:`1px solid ${r.border}`,color:r.muted,fontWeight:n.fontWeight.semibold,fontSize:11,textTransform:"uppercase",letterSpacing:"0.05em"},children:e},e))})}),t.jsx("tbody",{children:s.slice(0,5).map(e=>{const i=T[e.status]??T.PENDING;return t.jsxs("tr",{children:[t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`,fontFamily:n.fontFamily.mono,fontSize:12},children:e.toPhone}),t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`},children:t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"2px 8px",borderRadius:a.full,background:i.bg,color:i.color,fontSize:11,fontWeight:n.fontWeight.semibold},children:["SENT"===e.status&&t.jsx(u,{size:10}),"FAILED"===e.status&&t.jsx(x,{size:10}),"PENDING"===e.status&&t.jsx(j,{size:10}),i.label]})}),t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`,color:r.muted},children:e.sentBy||"—"}),t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`,color:r.muted,fontSize:12},children:e.sentAt?new Date(e.sentAt).toLocaleString("tr-TR"):"—"}),t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`,maxWidth:250,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.message})]},e.id)})})]})})})]})}function I({config:e,onSave:i}){const[o,d]=c.useState({phoneNumberId:(null==e?void 0:e.phoneNumberId)??"",businessAccountId:(null==e?void 0:e.businessAccountId)??"",accessToken:"",apiVersion:(null==e?void 0:e.apiVersion)??"v18.0"}),[p,u]=c.useState(!1),[x,g]=c.useState(!1),m={width:"100%",padding:"10px 12px",borderRadius:a.md,border:`1px solid ${r.border}`,background:r.bg.surface,color:r.text,fontSize:14,fontFamily:n.fontFamily.base,outline:"none",transition:"border-color 0.15s ease",boxSizing:"border-box"},y={display:"block",fontSize:12,fontWeight:n.fontWeight.semibold,color:r.muted,marginBottom:6,textTransform:"uppercase",letterSpacing:"0.05em"};return t.jsxs("div",{style:{display:"grid",gap:20,maxWidth:700},children:[t.jsx(l,{title:"Meta WABA API Bağlantısı",subtitle:"WhatsApp Business API yapılandırması",icon:t.jsx(h,{size:14,"aria-hidden":"true"}),children:t.jsxs("div",{style:{display:"grid",gap:16},children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"wa-phone-id",style:y,children:"Phone Number ID"}),t.jsx("input",{id:"wa-phone-id",type:"text",value:o.phoneNumberId,onChange:e=>d(t=>({...t,phoneNumberId:e.target.value})),placeholder:"123456789012345",style:m,autoComplete:"off"}),t.jsx("p",{style:{margin:"4px 0 0",fontSize:11,color:r.muted},children:"Meta Business Manager > WhatsApp > Phone Numbers bölümünden alınır."})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"wa-biz-id",style:y,children:"Business Account ID"}),t.jsx("input",{id:"wa-biz-id",type:"text",value:o.businessAccountId,onChange:e=>d(t=>({...t,businessAccountId:e.target.value})),placeholder:"987654321098765",style:m,autoComplete:"off"})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"wa-token",style:y,children:"Access Token"}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx("input",{id:"wa-token",type:x?"text":"password",value:o.accessToken,onChange:e=>d(t=>({...t,accessToken:e.target.value})),placeholder:"EAAX...",style:{...m,paddingRight:48},autoComplete:"new-password"}),t.jsx("button",{type:"button",onClick:()=>g(!x),"aria-label":x?"Token'ı gizle":"Token'ı göster",style:{position:"absolute",right:4,top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:r.muted,padding:8,minWidth:44,minHeight:44,display:"flex",alignItems:"center",justifyContent:"center"},children:x?t.jsx(S,{size:16}):t.jsx(z,{size:16})})]}),t.jsx("p",{style:{margin:"4px 0 0",fontSize:11,color:r.muted},children:"Kalıcı token için System User oluşturun. Geçici token 24 saatte sona erer."})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"wa-api-ver",style:y,children:"API Version"}),t.jsx("input",{id:"wa-api-ver",type:"text",value:o.apiVersion,onChange:e=>d(t=>({...t,apiVersion:e.target.value})),placeholder:"v18.0",style:{...m,maxWidth:200}})]}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:8},children:t.jsx(s,{variant:"primary",onClick:async()=>{u(!0);try{await i(o)}finally{u(!1)}},disabled:p,children:p?"Kaydediliyor...":"Yapılandırmayı Kaydet"})})]})}),t.jsxs(l,{title:"Bağlantı Testi",icon:t.jsx(f,{size:14,"aria-hidden":"true"}),children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[t.jsx("div",{style:{width:10,height:10,borderRadius:"50%",background:(null==e?void 0:e.configured)?r.success.DEFAULT:r.warning.DEFAULT}}),t.jsx("span",{style:{fontSize:13,color:r.text},children:(null==e?void 0:e.configured)?"API yapılandırması tamamlandı. Mesaj gönderimine hazır.":"Henüz yapılandırılmamış. Yukarıdaki alanları doldurup kaydedin."})]}),(null==e?void 0:e.configured)&&t.jsxs("div",{style:{marginTop:12,padding:12,borderRadius:a.md,background:r.success.light,fontSize:12,color:r.success.DEFAULT,display:"grid",gap:4},children:[t.jsxs("div",{children:["Phone Number ID: ",t.jsx("strong",{children:e.phoneNumberId})]}),t.jsxs("div",{children:["Business Account: ",t.jsx("strong",{children:e.businessAccountId||"—"})]}),t.jsxs("div",{children:["API Version: ",t.jsx("strong",{children:e.apiVersion})]})]})]})]})}function E({templates:i,configured:o,onSent:p,onError:u}){const[x,g]=c.useState(""),[h,f]=c.useState(""),[j,v]=c.useState(""),[S,T]=c.useState(""),[w,k]=c.useState(!1),[F,I]=c.useState("");c.useEffect(()=>{if(h&&"custom"!==h){const e=i.find(e=>e.name===h);I((null==e?void 0:e.body)??"")}else I("custom"===h?j:"")},[h,j,i]);const E={width:"100%",padding:"10px 12px",borderRadius:a.md,border:`1px solid ${r.border}`,background:r.bg.surface,color:r.text,fontSize:14,fontFamily:n.fontFamily.base,outline:"none",boxSizing:"border-box"},D={display:"block",fontSize:12,fontWeight:n.fontWeight.semibold,color:r.muted,marginBottom:6};return t.jsxs("div",{style:{display:"grid",gap:20,gridTemplateColumns:"1fr 1fr"},children:[t.jsxs(l,{title:"Mesaj Oluştur",icon:t.jsx(m,{size:14,"aria-hidden":"true"}),children:[!o&&t.jsxs("div",{style:{marginBottom:16,padding:"10px 14px",borderRadius:a.md,background:r.warning.light,color:r.warning.DEFAULT,fontSize:12,display:"flex",alignItems:"center",gap:8},children:[t.jsx(b,{size:14}),"API yapılandırılmamış — mesajlar simüle edilecek."]}),t.jsxs("div",{style:{display:"grid",gap:14},children:[t.jsxs("div",{children:[t.jsxs("label",{htmlFor:"send-phone",style:D,children:[t.jsx(A,{size:12,style:{display:"inline",verticalAlign:"middle",marginRight:4}}),"Telefon Numarası"]}),t.jsx("input",{id:"send-phone",type:"tel",value:x,onChange:e=>g(e.target.value),placeholder:"05xx xxx xx xx",style:E})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"send-order",style:D,children:"Sipariş ID (opsiyonel)"}),t.jsx("input",{id:"send-order",type:"text",value:S,onChange:e=>T(e.target.value),placeholder:"order-uuid veya boş bırakın",style:E})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"send-template",style:D,children:"Mesaj Şablonu"}),t.jsxs("select",{id:"send-template",value:h,onChange:e=>f(e.target.value),style:{...E,cursor:"pointer",appearance:"auto"},children:[t.jsx("option",{value:"",children:"Şablon seçin..."}),i.map(e=>t.jsx("option",{value:e.name,children:e.label},e.name))]})]}),"custom"===h&&t.jsxs("div",{children:[t.jsx("label",{htmlFor:"send-custom",style:D,children:"Mesaj Metni"}),t.jsx("textarea",{id:"send-custom",value:j,onChange:e=>v(e.target.value),placeholder:"Mesajınızı yazın...",rows:4,style:{...E,resize:"vertical",minHeight:80}})]}),t.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:8},children:t.jsx(s,{variant:"primary",onClick:async()=>{if(x.trim())if(h||j.trim()){k(!0);try{await e.sendWhatsAppMessage({to_phone:x.trim(),template_name:"custom"!==h?h:void 0,message_text:"custom"===h?j:void 0,order_id:S||void 0}),await p(),g(""),v(""),T(""),f("")}catch(t){u(t instanceof Error?t.message:"Mesaj gönderilemedi")}finally{k(!1)}}else u("Şablon veya mesaj metni gerekli");else u("Telefon numarası gerekli")},disabled:w||!x.trim(),icon:t.jsx(m,{size:14,"aria-hidden":"true"}),children:w?"Gönderiliyor...":"Gönder"})})]})]}),t.jsxs("div",{style:{display:"grid",gap:16,alignContent:"start"},children:[F&&t.jsx(l,{title:"Mesaj Önizleme",icon:t.jsx(z,{size:14,"aria-hidden":"true"}),children:t.jsxs("div",{style:{padding:16,borderRadius:a.lg,background:"#DCF8C6",color:"#111",fontSize:13,lineHeight:1.6,maxWidth:320,position:"relative"},children:[F,t.jsx("div",{style:{fontSize:10,color:"#888",textAlign:"right",marginTop:4},children:(new Date).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})})]})}),t.jsx(l,{title:"Kullanılabilir Şablonlar",icon:t.jsx(y,{size:14,"aria-hidden":"true"}),children:0===i.length?t.jsx("p",{style:{color:r.muted,fontSize:13,margin:0},children:"Şablon bulunamadı."}):t.jsx("div",{style:{display:"grid",gap:8},children:i.map(e=>t.jsxs("div",{onClick:()=>f(e.name),role:"button",tabIndex:0,onKeyDown:t=>"Enter"===t.key&&f(e.name),style:{padding:"10px 14px",borderRadius:a.md,border:`1px solid ${h===e.name?r.primary.DEFAULT:r.border}`,background:h===e.name?d(.08):r.bg.elevated,cursor:"pointer",transition:"all 0.15s ease"},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx("span",{style:{fontWeight:n.fontWeight.semibold,fontSize:13,color:r.text},children:e.label}),t.jsxs("span",{style:{fontSize:10,padding:"2px 6px",borderRadius:a.full,background:`${r.primary.DEFAULT}18`,color:r.primary.DEFAULT,fontWeight:n.fontWeight.semibold},children:[e.variables.length," değişken"]})]}),t.jsx("p",{style:{margin:"4px 0 0",fontSize:11,color:r.muted,lineHeight:1.4},children:e.body.length>80?e.body.slice(0,80)+"...":e.body})]},e.name))})})]})]})}function D({messages:e,onRefresh:i}){const[o,d]=c.useState("ALL"),[g,h]=c.useState(""),m=e.filter(e=>{if("ALL"!==o&&e.status!==o)return!1;if(g){const t=g.toLowerCase();return e.toPhone.includes(t)||e.message.toLowerCase().includes(t)||e.sentBy&&e.sentBy.toLowerCase().includes(t)||e.orderTsCode&&e.orderTsCode.toLowerCase().includes(t)}return!0}),y=[{id:"ALL",label:"Tümü",color:r.text},{id:"SENT",label:"Gönderildi",color:r.success.DEFAULT},{id:"FAILED",label:"Başarısız",color:r.danger.DEFAULT},{id:"PENDING",label:"Bekliyor",color:r.warning.DEFAULT}];return t.jsxs("div",{style:{display:"grid",gap:16},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[t.jsx("div",{style:{display:"flex",gap:4},children:y.map(i=>t.jsxs("button",{onClick:()=>d(i.id),style:{padding:"6px 14px",borderRadius:a.full,border:`1px solid ${o===i.id?i.color:r.border}`,background:o===i.id?`${i.color}18`:"transparent",color:o===i.id?i.color:r.muted,fontSize:12,fontWeight:n.fontWeight.semibold,cursor:"pointer",transition:"all 0.15s ease",fontFamily:n.fontFamily.base},children:[i.label,"ALL"!==i.id&&t.jsxs("span",{style:{marginLeft:6,opacity:.7},children:["(",e.filter(e=>e.status===i.id).length,")"]})]},i.id))}),t.jsx("input",{type:"text",value:g,onChange:e=>h(e.target.value),placeholder:"Telefon, mesaj veya sipariş ara...",style:{flex:"1 1 200px",padding:"8px 12px",borderRadius:a.md,border:`1px solid ${r.border}`,background:r.bg.surface,color:r.text,fontSize:13,outline:"none",fontFamily:n.fontFamily.base}}),t.jsx(s,{variant:"ghost",onClick:()=>{i()},icon:t.jsx(p,{size:14}),title:"Yenile",children:"Yenile"})]}),t.jsxs(l,{children:[0===m.length?t.jsx("div",{style:{padding:24,textAlign:"center",color:r.muted,fontSize:13},children:g||"ALL"!==o?"Filtreye uygun mesaj bulunamadı.":"Henüz mesaj bulunmuyor."}):t.jsx("div",{style:{overflowX:"auto"},children:t.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:13},children:[t.jsx("thead",{children:t.jsx("tr",{children:["Telefon","Durum","Sipariş","Gönderen","Tarih","Mesaj","Hata"].map(e=>t.jsx("th",{style:{textAlign:"left",padding:"8px 10px",borderBottom:`1px solid ${r.border}`,color:r.muted,fontWeight:n.fontWeight.semibold,fontSize:11,textTransform:"uppercase",letterSpacing:"0.05em",whiteSpace:"nowrap"},children:e},e))})}),t.jsx("tbody",{children:m.map(e=>{const i=T[e.status]??T.PENDING;return t.jsxs("tr",{style:{transition:"background 0.1s ease"},children:[t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`,fontFamily:n.fontFamily.mono,fontSize:12},children:e.toPhone}),t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`},children:t.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:4,padding:"2px 8px",borderRadius:a.full,background:i.bg,color:i.color,fontSize:11,fontWeight:n.fontWeight.semibold,whiteSpace:"nowrap"},children:["SENT"===e.status&&t.jsx(u,{size:10}),"FAILED"===e.status&&t.jsx(x,{size:10}),"PENDING"===e.status&&t.jsx(j,{size:10}),i.label]})}),t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`,color:r.muted,fontSize:12},children:e.orderTsCode||"—"}),t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`,color:r.muted},children:e.sentBy||"—"}),t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`,color:r.muted,fontSize:12,whiteSpace:"nowrap"},children:e.sentAt?new Date(e.sentAt).toLocaleString("tr-TR"):"—"}),t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`,maxWidth:220,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.message,children:e.message}),t.jsx("td",{style:{padding:"8px 10px",borderBottom:`1px solid ${r.border}`,color:r.danger.DEFAULT,fontSize:11,maxWidth:150,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.error??"",children:e.error||"—"})]},e.id)})})]})}),t.jsxs("div",{style:{padding:"8px 10px",borderTop:`1px solid ${r.border}`,fontSize:11,color:r.muted},children:[m.length," / ",e.length," mesaj gösteriliyor"]})]})]})}export{k as WhatsAppBusinessPage,k as default};
