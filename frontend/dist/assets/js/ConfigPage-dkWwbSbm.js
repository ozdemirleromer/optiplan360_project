import{v as e,a as i,e as a,j as r,c as t,C as s,T as n,w as l,R as o,p as d,d as c,B as p}from"./index-BqsYehSy.js";import{r as m,u as y,ag as u,aC as x,K as g}from"./ui-vendor-X7YeR1nJ.js";const b={ai_orchestrator:{label:"AI Orkestratör",description:"Yapay zeka tabanlı iş akışı optimizasyonu"},whatsapp_integration:{label:"WhatsApp Entegrasyonu",description:"WhatsApp üzerinden müşteri bildirimleri"},mikro_integration:{label:"Mikro ERP",description:"Mikro muhasebe yazılımı ile MsSQL entegrasyonu"},ocr_enabled:{label:"OCR Motoru",description:"Optik karakter tanıma ile sipariş okuma"},compliance_checks:{label:"Uyumluluk Kontrolleri",description:"Otomatik kalite ve uyumluluk denetimi"},advanced_analytics:{label:"Gelişmiş Analitik",description:"AI destekli tahmin ve kapasite planlaması"},beta_features:{label:"Beta Özellikler",description:"Deneysel özellikler (kararsız olabilir)"}};function h(){const[h,f]=m.useState("theme"),[k,v]=m.useState(!1),[j,S]=m.useState([]),[w,z]=m.useState(!1),[A,T]=m.useState(null),$=e(e=>e.themeName),C=e(e=>e.setThemeName),{addToast:E}=i(),F=m.useCallback(async()=>{z(!0);try{const e=await a.getFeatureFlags();S(e.features??[])}catch{S([])}finally{z(!1)}},[]);m.useEffect(()=>{"services"===h&&F()},[h,F]);return r.jsxs("div",{className:"electric-page",children:[r.jsx(t,{title:"Sistem Ayarları",subtitle:"Konfigürasyon ve denetim matrisi"}),r.jsxs("div",{className:"app-page-container",children:[r.jsx("div",{style:{display:"flex",gap:"2px",marginBottom:"24px",borderBottom:`1px solid ${s.border}`,flexWrap:"wrap"},children:[{key:"theme",label:"Tema Ayarları",icon:void 0},{key:"system",label:"Sistem Kontrolü",icon:void 0},{key:"services",label:"Servisler",icon:r.jsx(y,{size:14})}].map(({key:e,label:i,icon:a})=>r.jsxs("button",{onClick:()=>f(e),style:{display:"flex",alignItems:"center",gap:"6px",padding:"12px 24px",fontSize:14,fontWeight:h===e?700:400,color:h===e?s.primary.DEFAULT:s.muted,background:h===e?`${s.primary.DEFAULT}08`:"transparent",border:"none",borderBottom:h===e?`3px solid ${s.primary.DEFAULT}`:"3px solid transparent",cursor:"pointer",fontFamily:n.fontFamily.base,marginBottom:"-1px",transition:"all 0.2s",whiteSpace:"nowrap"},children:[a,i]},e))}),"theme"===h&&r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"12px"},children:l.map(e=>{const i=$===e.name;return r.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{C(e.name),E(`Tema "${e.label}" uygulandi`,"success")},onKeyDown:i=>{"Enter"!==i.key&&" "!==i.key||(i.preventDefault(),C(e.name),E(`Tema "${e.label}" uygulandi`,"success"))},style:{cursor:"pointer",borderRadius:o.md,overflow:"hidden",outline:"none",transition:"all 0.18s ease",transform:i?"translateY(-2px)":"none",boxShadow:i?`0 6px 20px ${d(.35)}, 0 0 0 2px ${s.primary.DEFAULT}`:`0 2px 8px ${d(.14)}`},children:[r.jsxs("div",{style:{background:`linear-gradient(135deg, ${e.preview.primary}, ${e.preview.accent})`,padding:"14px 14px 12px",position:"relative"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx("span",{style:{fontWeight:700,fontSize:13,color:"#ffffff",letterSpacing:"0.01em"},children:e.label}),i&&r.jsx(u,{size:15,color:"#ffffff",strokeWidth:3})]}),r.jsxs("div",{style:{display:"flex",gap:4,marginTop:8},children:[r.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:e.preview.bg,border:"1.5px solid rgba(255,255,255,0.4)"}}),r.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:"#ffffff",opacity:.7}}),r.jsx("div",{style:{width:12,height:12,borderRadius:"50%",background:e.preview.accent,border:"1.5px solid rgba(255,255,255,0.4)"}})]})]}),r.jsx("div",{style:{background:i?d(.1):s.bg.elevated,padding:"8px 12px 10px",borderTop:`1px solid ${s.border}`},children:r.jsx("div",{style:{fontSize:11,color:s.muted,lineHeight:1.45},children:e.description})})]},e.name)})}),"system"===h&&r.jsx(r.Fragment,{children:r.jsx(c,{title:"Denetim Matrisi",subtitle:"Sistem işlemleri için kontrol senaryoları",actions:r.jsx(p,{variant:"primary",size:"sm",onClick:async()=>{v(!0);try{await new Promise(e=>setTimeout(e,800)),E("Sistem ayarları kaydedildi","success")}catch(e){const i=e instanceof Error?e.message:"Ayarlar kaydedilemedi";E(i,"error")}finally{v(!1)}},disabled:k,children:k?"Kaydediliyor...":"Kaydet"}),children:r.jsx("div",{style:{display:"grid",gap:"16px"},children:[{category:"Sipariş Yönetimi",items:[{id:1,scenario:"Yeni sipariş oluşturulur",action:"Tekil kontrol"},{id:2,scenario:"Sipariş güncellenir",action:"Versiyon kontrol"},{id:3,scenario:"Sipariş silinir",action:"Geçici silme"},{id:4,scenario:"Toplu sipariş eklenir",action:"İşlem bütünlüğü kontrolü"}]},{category:"İstasyon Yönetimi",items:[{id:5,scenario:"İstasyon oluşturulur",action:"İsim tekil kontrolü"},{id:6,scenario:"İstasyon kaldırılır",action:"Alt bağımlılıklar kontrol"},{id:7,scenario:"İş akışı değiştirilir",action:"Aktif sipariş kontrol"}]},{category:"Kullanıcı Yönetimi",items:[{id:8,scenario:"Kullanıcı oluşturulur",action:"E-posta tekil kontrolü"},{id:9,scenario:"Şifre değiştirilir",action:"Güçlü şifre kontrol"},{id:10,scenario:"Hesap silinir",action:"30 gün saklama"}]},{category:"Sistem Güvenliği",items:[{id:11,scenario:"API istek sınırı aşılır",action:"429 döndür"},{id:12,scenario:"Geçersiz token",action:"401 döndür"},{id:13,scenario:"SQL enjeksiyon denemesi",action:"IP banla"}]}].map(e=>r.jsxs("div",{style:{padding:"16px",background:s.bg.surface,borderRadius:o.md,border:`1px solid ${s.border}`},children:[r.jsxs("div",{style:{fontSize:14,fontWeight:600,color:s.text,marginBottom:"12px",display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx(x,{size:16,color:s.primary.DEFAULT}),e.category]}),r.jsx("div",{style:{display:"grid",gap:"8px"},children:e.items.map(e=>r.jsxs("div",{style:{padding:"10px",background:s.bg.main,borderRadius:o.sm,border:`1px solid ${s.border}`,display:"grid",gridTemplateColumns:"2fr 1fr",gap:"12px",fontSize:12},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600,color:s.text,marginBottom:"2px"},children:e.scenario}),r.jsxs("div",{style:{fontSize:11,color:s.muted},children:["Aksiyon: ",e.action]})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[r.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",background:s.success.DEFAULT,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(u,{size:12,color:"white"})}),r.jsx("span",{style:{marginLeft:"8px",color:s.muted},children:"Aktif"})]})]},e.id))})]},e.category))})})}),"services"===h&&r.jsx(c,{title:"API Servisleri",subtitle:"Harici entegrasyonları ve sistem modüllerini buradan yönetin",actions:r.jsx(p,{variant:"secondary",size:"sm",onClick:F,disabled:w,children:w?"Yükleniyor...":"Yenile"}),children:w&&0===j.length?r.jsxs("div",{style:{display:"flex",justifyContent:"center",padding:32,color:s.muted},children:[r.jsx(g,{size:20,style:{animation:"spin 1s linear infinite"}}),r.jsx("span",{style:{marginLeft:8},children:"Servis durumları yükleniyor..."})]}):0===j.length?r.jsx("div",{style:{textAlign:"center",padding:32,color:s.muted,fontSize:13},children:"Servis bilgisi alınamadı. Backend bağlantısını kontrol edin."}):r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:12},children:j.map(e=>{const i=b[e.name]??{label:e.name,description:""},t=A===e.name;return r.jsxs("div",{style:{padding:16,background:e.enabled?"rgba(34,197,94,0.04)":s.bg.surface,border:`1px solid ${e.enabled?"rgba(34,197,94,0.3)":s.border}`,borderRadius:o.md,display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:12},children:[r.jsxs("div",{style:{flex:1,minWidth:0},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[r.jsx(y,{size:14,color:e.enabled?s.success.DEFAULT:s.muted}),r.jsx("span",{style:{fontSize:14,fontWeight:600,color:s.text},children:i.label})]}),r.jsx("div",{style:{fontSize:12,color:s.muted,lineHeight:1.4},children:i.description}),r.jsx("div",{style:{marginTop:8},children:r.jsx("span",{style:{fontSize:11,padding:"2px 8px",borderRadius:o.sm,background:e.enabled?"rgba(34,197,94,0.12)":"rgba(239,68,68,0.08)",color:e.enabled?s.success.DEFAULT:s.error.DEFAULT,fontWeight:500},children:e.enabled?"Aktif":"Devre Dışı"})})]}),r.jsx("button",{onClick:()=>{(async e=>{T(e.name);try{await a.updateFeatureFlag(e.name,!e.enabled),S(i=>i.map(i=>i.name===e.name?{...i,enabled:!i.enabled}:i));const i=b[e.name];E(`${(null==i?void 0:i.label)??e.name} ${e.enabled?"devre dışı bırakıldı":"etkinleştirildi"}`,"success")}catch(i){const e=i instanceof Error?i.message:"İşlem başarısız";E(e,"error")}finally{T(null)}})(e)},disabled:t,"aria-label":`${i.label} ${e.enabled?"devre dışı bırak":"etkinleştir"}`,style:{width:44,height:24,borderRadius:12,border:"none",cursor:t?"wait":"pointer",background:e.enabled?s.success.DEFAULT:s.gray[400],position:"relative",transition:"background 0.2s",flexShrink:0,opacity:t?.6:1},children:r.jsx("div",{style:{width:18,height:18,borderRadius:"50%",background:"white",position:"absolute",top:3,left:e.enabled?23:3,transition:"left 0.2s"}})})]},e.name)})})})]})]})}export{h as C};
