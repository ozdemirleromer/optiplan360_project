import{j as e,d as t,C as i,p as l,B as a,f as n,R as r,M as s,I as d,m as o}from"./index-BqsYehSy.js";import{r as c}from"./ui-vendor-X7YeR1nJ.js";import{c as u}from"./crmService-CaLpglF9.js";import{i as p}from"./integrationService-BBjlJOEd.js";import"./react-vendor-BTlmOg1k.js";import"./export-jspdf-ClKeqeik.js";import"./state-CRAppeNE.js";import"./export-xlsx-C5xT2hrF.js";function x(){const[l,a]=c.useState(null),[n,r]=c.useState(null),[s,d]=c.useState(!0);return c.useEffect(()=>{!async function(){try{d(!0);const[e,t]=await Promise.all([u.getStats(),p.getHealth()]);a(e),r(t)}catch(e){}finally{d(!1)}}()},[]),s?e.jsx(t,{title:"Yükleniyor...",children:e.jsxs("div",{style:{padding:"40px",textAlign:"center",color:i.muted},children:[e.jsx("div",{className:"loading-spinner",style:{margin:"0 auto 12px"}}),"Veriler getiriliyor..."]})}):e.jsx(m,{stats:l,health:n})}const y=x;function m({stats:a,health:s}){const d="number"==typeof(null==a?void 0:a.pipelineValue)?a.pipelineValue:0,o="number"==typeof(null==a?void 0:a.avgCloseProbability)?a.avgCloseProbability:null,c=(null==a?void 0:a.activeAccounts)??(null==a?void 0:a.totalAccounts)??0,u=(null==a?void 0:a.totalAccounts)??(null==a?void 0:a.activeAccounts)??0,p=(null==a?void 0:a.stageDistribution)??((null==a?void 0:a.pipeline)?Object.fromEntries(Object.entries(a.pipeline).map(([e,t])=>[e,t.count])):null);return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px"},children:[e.jsx(t,{title:"Pipeline Değeri",subtitle:"Toplam fırsat değeri",children:e.jsxs("div",{style:{padding:"12px 0"},children:[e.jsxs("div",{style:{fontSize:32,fontWeight:700,color:i.primary.DEFAULT,marginBottom:"8px"},children:["₺",d.toLocaleString("tr-TR")]}),e.jsxs("div",{style:{fontSize:13,color:i.muted},children:["Ortalama Kapanış Olasılığı:"," ",e.jsx("span",{style:{fontWeight:600,color:i.text},children:null!==o?`%${o.toFixed(0)}`:"-"})]})]})}),e.jsx(t,{title:"Cari Hesaplar",subtitle:"Aktif müşteri sayısı",children:e.jsxs("div",{style:{padding:"12px 0"},children:[e.jsx("div",{style:{fontSize:32,fontWeight:700,color:i.success.DEFAULT,marginBottom:"8px"},children:c}),e.jsxs("div",{style:{fontSize:13,color:i.muted},children:["Toplam: ",e.jsx("span",{style:{fontWeight:600,color:i.text},children:u})]})]})}),e.jsx(t,{title:"Fırsatlar",subtitle:"Açık fırsat sayısı",children:e.jsxs("div",{style:{padding:"12px 0"},children:[e.jsx("div",{style:{fontSize:32,fontWeight:700,color:i.warning.DEFAULT,marginBottom:"8px"},children:(null==a?void 0:a.totalOpportunities)||0}),e.jsx("div",{style:{fontSize:13,color:i.muted},children:"Pipeline'da"})]})}),e.jsx(t,{title:"Entegrasyon Sağlık",subtitle:"Mikro ERP durumu",children:e.jsxs("div",{style:{padding:"12px 0"},children:[e.jsx(n,{variant:"HEALTHY"===(null==s?void 0:s.status)?"success":"DEGRADED"===(null==s?void 0:s.status)?"warning":"danger",children:(null==s?void 0:s.status)||"UNKNOWN"}),e.jsxs("div",{style:{fontSize:13,color:i.muted,marginTop:"12px"},children:["Bekleyen İşlem: ",e.jsx("span",{style:{fontWeight:600,color:i.text},children:(null==s?void 0:s.outboxPending)||0})]})]})}),p&&Object.keys(p).length>0&&e.jsx(t,{title:"Aşama Dağılımı",subtitle:"Pipeline aşamalarına göre",style:{gridColumn:"1 / -1"},children:e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",padding:"12px 0"},children:Object.entries(p).map(([t,a])=>e.jsxs("div",{style:{flex:"1 1 150px",padding:"12px",background:l(.05),borderRadius:r.md,border:`1px solid ${i.border}`},children:[e.jsx("div",{style:{fontSize:11,fontWeight:600,color:i.muted,marginBottom:"4px"},children:t.replace("_"," ")}),e.jsx("div",{style:{fontSize:24,fontWeight:700,color:i.primary.DEFAULT},children:a})]},t))})})]})}function h(){const[p,x]=c.useState([]),[y,m]=c.useState(null),[h,g]=c.useState([]),[f,v]=c.useState(!0),[j,b]=c.useState(!1),[_,S]=c.useState(!1),[T,C]=c.useState(null),k={company_name:"",account_type:"CORPORATE",tax_id:"",tax_office:"",phone:"",email:"",address:"",city:"",district:"",website:"",industry:"",credit_limit:"",payment_term_days:"",mikro_cari_kod:"",plaka_birim_fiyat:"",bant_metre_fiyat:"",notes:""},[E,A]=c.useState(k);return c.useEffect(()=>{!async function(){try{v(!0);const e=await u.listAccounts({is_active:!0});x(e)}catch(e){}finally{v(!1)}}()},[]),f?e.jsx(t,{title:"Cari Hesaplar",children:e.jsx("div",{style:{padding:"20px",textAlign:"center",color:i.muted},children:"Yükleniyor..."})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:y?"1fr 1fr":"1fr",gap:"20px"},children:[e.jsx(t,{title:"Cari Hesaplar",subtitle:`${p.length} aktif hesap`,actions:e.jsx(a,{variant:"primary",size:"sm",onClick:()=>{A(k),C(null),b(!0)},children:"+ Yeni Cari"}),children:e.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:0===p.length?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:i.muted},children:"Henüz cari hesap yok"}):p.map(t=>e.jsxs("div",{onClick:()=>async function(e){m(e);try{const t=await u.listContacts({account_id:e.id});g(t)}catch(t){}}(t),style:{padding:"12px",borderBottom:`1px solid ${i.border}`,cursor:"pointer",background:(null==y?void 0:y.id)===t.id?l(.05):"transparent",transition:"background 0.2s ease"},children:[e.jsx("div",{style:{fontWeight:600,fontSize:14,color:i.text,marginBottom:"4px"},children:t.companyName}),e.jsxs("div",{style:{fontSize:12,color:i.muted,display:"flex",gap:"12px"},children:[t.taxId&&e.jsxs("span",{children:["VKN: ",t.taxId]}),t.mikroCariKod&&e.jsxs("span",{children:["Mikro: ",t.mikroCariKod]})]}),void 0!==t.balance&&0!==t.balance&&e.jsxs("div",{style:{fontSize:13,fontWeight:600,color:t.balance>0?i.success.DEFAULT:i.danger.DEFAULT,marginTop:"6px"},children:["Bakiye: ₺",t.balance.toLocaleString("tr-TR")]})]},t.id))})}),y&&e.jsxs(t,{title:y.companyName,subtitle:"Cari Detayı",children:[e.jsxs("div",{style:{fontSize:13,lineHeight:1.8},children:[y.taxId&&e.jsxs("div",{children:[e.jsx("span",{style:{color:i.muted,fontWeight:500},children:"VKN:"})," ",e.jsx("span",{style:{color:i.text},children:y.taxId})]}),y.taxOffice&&e.jsxs("div",{children:[e.jsx("span",{style:{color:i.muted,fontWeight:500},children:"Vergi Dairesi:"})," ",e.jsx("span",{style:{color:i.text},children:y.taxOffice})]}),y.phone&&e.jsxs("div",{children:[e.jsx("span",{style:{color:i.muted,fontWeight:500},children:"Telefon:"})," ",e.jsx("span",{style:{color:i.text},children:y.phone})]}),y.email&&e.jsxs("div",{children:[e.jsx("span",{style:{color:i.muted,fontWeight:500},children:"E-posta:"})," ",e.jsx("span",{style:{color:i.text},children:y.email})]}),y.address&&e.jsxs("div",{children:[e.jsx("span",{style:{color:i.muted,fontWeight:500},children:"Adres:"})," ",e.jsx("span",{style:{color:i.text},children:y.address})]}),(y.mikroCariKod||y.plakaBirimFiyat||y.bantMetreFiyat)&&e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:`1px solid ${i.border}`,display:"flex",gap:8,flexWrap:"wrap"},children:[y.mikroCariKod&&e.jsxs(n,{variant:"info",children:["Mikro Kod: ",y.mikroCariKod]}),null!=y.plakaBirimFiyat&&e.jsxs(n,{variant:"success",children:["Plaka: ",y.plakaBirimFiyat," TL/adet"]}),null!=y.bantMetreFiyat&&e.jsxs(n,{variant:"success",children:["Bant: ",y.bantMetreFiyat," TL/m"]})]})]}),e.jsxs("div",{style:{marginTop:"20px",paddingTop:"20px",borderTop:`1px solid ${i.border}`},children:[e.jsxs("h4",{style:{fontSize:14,fontWeight:600,color:i.text,marginBottom:"12px"},children:["Kişiler (",h.length,")"]}),0===h.length?e.jsx("div",{style:{fontSize:12,color:i.muted},children:"Henüz kişi eklenmemiş"}):h.map(t=>e.jsxs("div",{style:{padding:"8px",background:i.bg.surface,borderRadius:r.sm,marginBottom:"8px",fontSize:13},children:[e.jsxs("div",{style:{fontWeight:600,color:i.text},children:[t.firstName," ",t.lastName,t.isPrimary&&e.jsx("span",{style:{marginLeft:"8px"},children:e.jsx(n,{variant:"info",children:"Birincil"})})]}),t.title&&e.jsx("div",{style:{fontSize:12,color:i.muted},children:t.title}),t.email&&e.jsx("div",{style:{fontSize:12,color:i.muted,marginTop:"4px"},children:t.email}),t.phone&&e.jsx("div",{style:{fontSize:12,color:i.muted},children:t.phone})]},t.id))]})]})]}),e.jsx(s,{open:j,onClose:()=>b(!1),title:"Yeni Cari Oluştur",subtitle:"Temel bilgileri girin",wide:!0,id:"create-account-modal",children:e.jsxs("form",{onSubmit:async function(e){e.preventDefault();const t=E.company_name.trim();if(t){S(!0),C(null);try{const e={company_name:t,account_type:E.account_type,tax_id:E.tax_id||void 0,tax_office:E.tax_office||void 0,phone:E.phone||void 0,email:E.email||void 0,address:E.address||void 0,city:E.city||void 0,district:E.district||void 0,website:E.website||void 0,industry:E.industry||void 0,credit_limit:E.credit_limit?Number(E.credit_limit):void 0,payment_term_days:E.payment_term_days?Number(E.payment_term_days):void 0,mikro_cari_kod:E.mikro_cari_kod||void 0,plaka_birim_fiyat:E.plaka_birim_fiyat?Number(E.plaka_birim_fiyat):void 0,bant_metre_fiyat:E.bant_metre_fiyat?Number(E.bant_metre_fiyat):void 0,notes:E.notes||void 0},i=await u.createAccount(e);x(e=>[i,...e]),m(i),g([]),A(k),b(!1)}catch(i){const e=i instanceof Error?i.message:"Cari hesap oluşturulamadı.";C(e)}finally{S(!1)}}else C("Firma adı zorunludur.")},style:{padding:"10px 0",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("h4",{style:{margin:0,fontSize:14,fontWeight:600,color:i.primary.DEFAULT,borderBottom:`1px solid ${i.border}`,paddingBottom:8},children:"Firma ve İletişim Bilgileri"}),e.jsx(d,{label:"Firma Adı",value:E.company_name,onChange:e=>A(t=>({...t,company_name:e.target.value})),placeholder:"Firma adı",required:!0}),e.jsx(o,{label:"Hesap Tipi",value:E.account_type,onChange:e=>A(t=>({...t,account_type:String(e)})),options:[{value:"CORPORATE",label:"Kurumsal"},{value:"PERSONAL",label:"Bireysel"}]}),e.jsx(d,{label:"Telefon",value:E.phone,onChange:e=>A(t=>({...t,phone:e.target.value})),placeholder:"05XX XXX XX XX"}),e.jsx(d,{type:"email",label:"E-posta",value:E.email,onChange:e=>A(t=>({...t,email:e.target.value})),placeholder:"ornek@firma.com"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("h4",{style:{margin:0,fontSize:14,fontWeight:600,color:i.primary.DEFAULT,borderBottom:`1px solid ${i.border}`,paddingBottom:8},children:"Mali ve Bölgesel Bilgiler"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(d,{label:"Vergi No",value:E.tax_id,onChange:e=>A(t=>({...t,tax_id:e.target.value})),placeholder:"VKN veya TC"}),e.jsx(d,{label:"Vergi Dairesi",value:E.tax_office,onChange:e=>A(t=>({...t,tax_office:e.target.value})),placeholder:"Daire adı"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(d,{label:"Plaka Birim Fiyat (TL)",type:"number",value:E.plaka_birim_fiyat,onChange:e=>A(t=>({...t,plaka_birim_fiyat:e.target.value})),placeholder:"Ör: 450"}),e.jsx(d,{label:"Bant Metre Fiyat (TL)",type:"number",value:E.bant_metre_fiyat,onChange:e=>A(t=>({...t,bant_metre_fiyat:e.target.value})),placeholder:"Ör: 12"})]}),e.jsx(d,{label:"Adres",value:E.address,onChange:e=>A(t=>({...t,address:e.target.value})),placeholder:"Açık adres"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsx(d,{label:"İl",value:E.city,onChange:e=>A(t=>({...t,city:e.target.value})),placeholder:"Şehir"}),e.jsx(d,{label:"İlçe",value:E.district,onChange:e=>A(t=>({...t,district:e.target.value})),placeholder:"İlçe"})]})]}),T&&e.jsx("div",{style:{gridColumn:"1 / -1",color:i.error.DEFAULT,fontSize:13},children:T}),e.jsxs("div",{style:{gridColumn:"1 / -1",display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"12px",paddingTop:"16px",borderTop:`1px solid ${i.border}`},children:[e.jsx(a,{type:"button",variant:"ghost",onClick:()=>b(!1),children:"Vazgeç"}),e.jsx(a,{type:"submit",variant:"primary",disabled:_,style:{minWidth:120},children:_?"Kaydediliyor...":"Cari Kartı Oluştur"})]})]})})]})}function g(){const[l,p]=c.useState([]),[x,y]=c.useState(!0),[m,h]=c.useState(null),[g,f]=c.useState(!1),[v,j]=c.useState({title:"",account_id:"",stage:"PROSPECTING",amount:0,expected_close_date:""});async function b(){try{y(!0);const e=await u.listOpportunities();p(e)}catch(e){}finally{y(!1)}}c.useEffect(()=>{b()},[]);const _={PROSPECTING:i.muted,QUALIFICATION:i.info.DEFAULT,PROPOSAL:i.warning.DEFAULT,NEGOTIATION:i.accent.DEFAULT,CLOSED_WON:i.success.DEFAULT,CLOSED_LOST:i.error.DEFAULT};return x?e.jsx(t,{title:"Fırsat Pipeline",children:e.jsx("div",{style:{padding:20},children:"Yükleniyor..."})}):e.jsxs(e.Fragment,{children:[e.jsx(t,{title:"Fırsat Pipeline",subtitle:`${l.length} aktif fırsat`,actions:e.jsx(a,{onClick:()=>f(!0),children:"+ Yeni Fırsat"}),children:0===l.length?e.jsx("div",{style:{padding:"20px",color:i.muted},children:"Henüz fırsat bulunmuyor."}):e.jsx("div",{style:{display:"grid",gap:"12px"},children:l.map(t=>{var l;return e.jsx("div",{style:{padding:"16px",border:`1px solid ${i.border}`,borderRadius:r.md,borderLeft:`4px solid ${_[t.stage]||i.muted}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,color:i.text},children:t.title}),e.jsx("div",{style:{fontSize:12,color:i.muted},children:null==(l=t.account)?void 0:l.companyName})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:700,color:i.primary.DEFAULT},children:["₺",(t.amount??0).toLocaleString()]}),e.jsx(n,{style:{background:_[t.stage]},children:t.stage})]}),"CLOSED_WON"!==t.stage&&"CLOSED_LOST"!==t.stage&&e.jsx(a,{size:"sm",variant:"primary",disabled:m===t.id,onClick:e=>{e.stopPropagation(),async function(e){try{h(e),await u.convertToOrder(e),b()}catch(t){}finally{h(null)}}(t.id)},children:m===t.id?"...":"Siparişe Dönüştür"})]})]})},t.id)})})}),e.jsx(s,{open:g,onClose:()=>f(!1),title:"Yeni Fırsat Oluştur",children:e.jsxs("form",{onSubmit:async function(e){e.preventDefault();try{await u.createOpportunity({title:v.title,account_id:v.account_id,stage:v.stage,amount:v.amount,expected_close_date:v.expected_close_date}),f(!1),b(),j({title:"",account_id:"",stage:"PROSPECTING",amount:0,expected_close_date:""})}catch(t){}},style:{display:"grid",gap:"16px"},children:[e.jsx(d,{label:"Fırsat Adı",value:v.title,onChange:e=>j(t=>({...t,title:e.target.value})),required:!0}),e.jsx(d,{label:"Değer (₺)",type:"number",value:v.amount,onChange:e=>j(t=>({...t,amount:Number(e.target.value)})),required:!0}),e.jsx(o,{label:"Aşama",value:v.stage,onChange:e=>j(t=>({...t,stage:String(e)})),options:[{value:"PROSPECTING",label:"Araştırma"},{value:"QUALIFICATION",label:"Değerlendirme"},{value:"PROPOSAL",label:"Teklif"},{value:"NEGOTIATION",label:"Müzakere"},{value:"CLOSED_WON",label:"Kazanıldı"},{value:"CLOSED_LOST",label:"Kaybedildi"}]}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[e.jsx(a,{type:"button",variant:"ghost",onClick:()=>f(!1),children:"Vazgeç"}),e.jsx(a,{type:"submit",children:"Kaydet"})]})]})})]})}function f(){const[l,o]=c.useState([]),[p,x]=c.useState(!0),[y,m]=c.useState(!1),[h,g]=c.useState({account_id:"",title:"",tax_rate:20,discount_rate:0,notes:""});async function f(){try{x(!0);const e=await u.listQuotes();o(e)}catch(e){}finally{x(!1)}}c.useEffect(()=>{f()},[]);const v={DRAFT:i.muted,SENT:i.info.DEFAULT,ACCEPTED:i.success.DEFAULT,REJECTED:i.error.DEFAULT,EXPIRED:i.warning.DEFAULT};return p?e.jsx(t,{title:"Teklifler",children:e.jsx("div",{style:{padding:20},children:"Yükleniyor..."})}):e.jsxs(e.Fragment,{children:[e.jsx(t,{title:"Teklifler",subtitle:`${l.length} teklif`,actions:e.jsx(a,{onClick:()=>m(!0),children:"+ Yeni Teklif"}),children:0===l.length?e.jsx("div",{style:{padding:"20px",color:i.muted},children:"Henüz teklif bulunmuyor."}):e.jsx("div",{style:{display:"grid",gap:"12px"},children:l.map(t=>e.jsx("div",{style:{padding:"16px",border:`1px solid ${i.border}`,borderRadius:r.md,borderLeft:`4px solid ${v[t.status]||i.muted}`},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:600,color:i.text},children:t.quoteNumber}),e.jsx("div",{style:{fontSize:12,color:i.muted},children:t.accountId})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsxs("div",{style:{fontWeight:700,color:i.primary.DEFAULT},children:["₺",(t.total??0).toLocaleString()]}),e.jsx(n,{style:{background:v[t.status]},children:t.status})]})]})},t.id))})}),e.jsx(s,{open:y,onClose:()=>m(!1),title:"Yeni Teklif Oluştur",children:e.jsxs("form",{onSubmit:async function(e){e.preventDefault();try{const e={account_id:h.account_id,title:h.title,tax_rate:h.tax_rate,discount_rate:h.discount_rate,notes:h.notes||void 0,lines:[]};await u.createQuote(e),m(!1),g({account_id:"",title:"",tax_rate:20,discount_rate:0,notes:""}),f()}catch(t){}},style:{display:"grid",gap:"16px"},children:[e.jsx(d,{label:"Teklif Başlığı",value:h.title,onChange:e=>g(t=>({...t,title:e.target.value})),required:!0}),e.jsx(d,{label:"Hesap ID",value:h.account_id,onChange:e=>g(t=>({...t,account_id:e.target.value})),required:!0}),e.jsx(d,{label:"KDV Oranı (%)",type:"number",value:h.tax_rate,onChange:e=>g(t=>({...t,tax_rate:Number(e.target.value)}))}),e.jsx(d,{label:"İndirim Oranı (%)",type:"number",value:h.discount_rate,onChange:e=>g(t=>({...t,discount_rate:Number(e.target.value)}))}),e.jsx(d,{label:"Notlar",value:h.notes,onChange:e=>g(t=>({...t,notes:e.target.value}))}),e.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[e.jsx(a,{type:"button",variant:"ghost",onClick:()=>m(!1),children:"Vazgeç"}),e.jsx(a,{type:"submit",children:"Kaydet"})]})]})})]})}function v(){const[l,r]=c.useState(null),[s,d]=c.useState(!0);async function o(){try{d(!0);const e=await p.getHealth();r(e)}catch(e){}finally{d(!1)}}return c.useEffect(()=>{o()},[]),s?e.jsx(t,{title:"Yükleniyor...",children:e.jsxs("div",{style:{padding:"40px",textAlign:"center",color:i.muted},children:[e.jsx("div",{className:"loading-spinner",style:{margin:"0 auto 12px"}}),"Senkron durumu yükleniyor..."]})}):e.jsx(t,{title:"Senkron Durumu",subtitle:"Mikro ERP bağlantı sağlığı",actions:e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>{o()},children:"↻ Yenile"}),children:e.jsx("div",{style:{padding:"12px 0"},children:e.jsx(n,{variant:"HEALTHY"===(null==l?void 0:l.status)?"success":"DEGRADED"===(null==l?void 0:l.status)?"warning":"danger",children:(null==l?void 0:l.status)||"BİLİNMEYEN"})})})}function j(){const[l,a]=c.useState([]),[n,s]=c.useState(!0);return c.useEffect(()=>{!async function(){try{s(!0);const e=await p.listErrors();a(e)}catch(e){}finally{s(!1)}}()},[]),n?e.jsx(t,{title:"Entegrasyon Hataları",children:e.jsx("div",{style:{padding:20},children:"Yükleniyor..."})}):e.jsx(t,{title:"Entegrasyon Hataları",subtitle:`${l.length} hata`,children:0===l.length?e.jsx("div",{style:{padding:"20px",color:i.muted},children:"Henüz hata kaydı bulunmuyor."}):e.jsx("div",{style:{display:"grid",gap:"12px"},children:l.map((t,l)=>e.jsxs("div",{style:{padding:"16px",border:`1px solid ${i.error.DEFAULT}30`,borderRadius:r.md,background:`${i.error.DEFAULT}08`},children:[e.jsx("div",{style:{fontWeight:600,color:i.error.DEFAULT},children:t.errorCode}),e.jsx("div",{style:{fontSize:13,color:i.text,marginTop:4},children:t.errorMessage}),e.jsx("div",{style:{fontSize:11,color:i.muted,marginTop:8},children:new Date(t.createdAt).toLocaleString("tr-TR")})]},l))})})}function b(){const[l,a]=c.useState([]),[n,s]=c.useState(!0);return c.useEffect(()=>{!async function(){try{s(!0);const e=await p.listAudit();a(e)}catch(e){}finally{s(!1)}}()},[]),n?e.jsx(t,{title:"İşlem Geçmişi",children:e.jsx("div",{style:{padding:20},children:"Yükleniyor..."})}):e.jsx(t,{title:"İşlem Geçmişi",subtitle:`${l.length} kayıt`,children:0===l.length?e.jsx("div",{style:{padding:"20px",color:i.muted},children:"Henüz işlem kaydı bulunmuyor."}):e.jsx("div",{style:{display:"grid",gap:"12px"},children:l.map((t,l)=>e.jsxs("div",{style:{padding:"16px",border:`1px solid ${i.border}`,borderRadius:r.md},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontWeight:600,color:i.text},children:t.action}),e.jsx("div",{style:{fontSize:11,color:i.muted},children:new Date(t.createdAt).toLocaleString("tr-TR")})]}),e.jsxs("div",{style:{fontSize:13,color:i.muted,marginTop:4},children:[t.entityType,": ",t.entityId]}),t.oldValue&&e.jsx("div",{style:{fontSize:12,color:i.text,marginTop:8,padding:8,background:`${i.bg.main}`,borderRadius:r.sm},children:JSON.stringify(t.oldValue)})]},l))})})}export{h as AccountsTab,b as AuditTab,x as CRMDashboardTab,y as CRMPage,m as DashboardTab,j as ErrorsTab,g as OpportunitiesTab,f as QuotesTab,v as SyncHealthTab};
