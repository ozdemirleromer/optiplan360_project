import{j as e,c as i,B as t,C as s,R as a}from"./index-BqsYehSy.js";import{r,V as n,ad as o,f as l,ac as d,e as c,ae as p}from"./ui-vendor-X7YeR1nJ.js";import"./react-vendor-BTlmOg1k.js";import"./export-jspdf-ClKeqeik.js";import"./state-CRAppeNE.js";import"./export-xlsx-C5xT2hrF.js";const u=[{id:"wf-1",name:"Gecikme Uyarisi",description:"Geciken siparisler icin otomatik bildirim",active:!0,steps:[{id:"s1",type:"trigger",config:{typeId:"schedule",label:"Her gun 09:00",params:{time:"09:00"}}},{id:"s2",type:"action",config:{typeId:"send_email",label:"Musteriye e-posta",params:{to:"{{customer.email}}"}}},{id:"s3",type:"action",config:{typeId:"send_whatsapp",label:"WhatsApp bildirim",params:{to:"{{customer.phone}}"}}}],lastRun:"2024-02-18T09:00:00Z",runCount:45},{id:"wf-2",name:"Dusuk Stok Tedarik",description:"Stok azalinca tedarikciye otomatik siparis",active:!0,steps:[{id:"s1",type:"trigger",config:{typeId:"stock_low",label:"Stok esik altina dusunce",params:{threshold:"20"}}},{id:"s2",type:"action",config:{typeId:"send_email",label:"Tedarikciye siparis",params:{to:"{{supplier.email}}"}}},{id:"s3",type:"action",config:{typeId:"create_report",label:"Stok raporu olustur",params:{}}}],lastRun:"2024-02-17T14:30:00Z",runCount:12},{id:"wf-3",name:"Istasyon Ariza Protokolu",description:"Istasyon arizalaninca yoneticiye bildir",active:!1,steps:[{id:"s1",type:"trigger",config:{typeId:"station_offline",label:"Istasyon cevrimdisi",params:{}}},{id:"s2",type:"action",config:{typeId:"notify_user",label:"Yoneticiye bildir",params:{role:"ADMIN"}}},{id:"s3",type:"action",config:{typeId:"send_telegram",label:"Telegram uyarisi",params:{}}}],runCount:8}],g=()=>{const[g,y]=r.useState(u),[m,x]=r.useState(null);return e.jsxs("div",{className:"electric-page",children:[e.jsx(i,{title:"Is Otomasyon Akislari",subtitle:"Surec tabanli otomasyonlari yonetin",breadcrumbs:["Yonetim","Workflow Builder"],children:e.jsxs(t,{variant:"primary",size:"sm",children:[e.jsx(n,{size:16})," Yeni Akis"]})}),e.jsxs("div",{className:"app-page-container",children:[e.jsx("div",{style:{display:"grid",gap:16},children:g.map(i=>e.jsxs("div",{style:{padding:20,borderRadius:a.lg,border:`1px solid ${(null==m?void 0:m.id)===i.id?s.primary.DEFAULT+"50":s.border}`,background:s.bg.surface,cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>x(i),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{style:{width:40,height:40,borderRadius:a.md,background:i.active?`${s.success.DEFAULT}20`:`${s.gray[400]}20`,display:"flex",alignItems:"center",justifyContent:"center",color:i.active?s.success.DEFAULT:s.gray[400]},children:e.jsx(o,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:15,fontWeight:600,color:s.text},children:i.name}),e.jsx("div",{style:{fontSize:12,color:s.muted,marginTop:2},children:i.description})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsxs("div",{style:{textAlign:"right",fontSize:11,color:s.muted},children:[e.jsxs("div",{children:[i.runCount," calistirma"]}),i.lastRun&&e.jsxs("div",{children:["Son: ",new Date(i.lastRun).toLocaleDateString("tr-TR")]})]}),e.jsx("button",{onClick:e=>{var t;e.stopPropagation(),t=i.id,y(e=>e.map(e=>e.id===t?{...e,active:!e.active}:e))},style:{width:44,height:24,borderRadius:12,border:"none",background:i.active?s.success.DEFAULT:s.gray[400],cursor:"pointer",position:"relative",transition:"background 0.2s"},children:e.jsx("div",{style:{width:18,height:18,borderRadius:"50%",background:"white",position:"absolute",top:3,left:i.active?23:3,transition:"left 0.2s"}})}),e.jsx("button",{onClick:e=>{var t;e.stopPropagation(),t=i.id,y(e=>e.filter(e=>e.id!==t)),(null==m?void 0:m.id)===t&&x(null)},style:{background:"none",border:"none",color:s.danger.DEFAULT,cursor:"pointer",padding:4},"aria-label":"Sil",children:e.jsx(l,{size:16})})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8,marginTop:16,flexWrap:"wrap"},children:i.steps.map((t,a)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("div",{style:{padding:"4px 10px",borderRadius:16,background:"trigger"===t.type?`${s.info.DEFAULT}20`:`${s.accent.DEFAULT}20`,color:"trigger"===t.type?s.info.DEFAULT:s.accent.DEFAULT,fontSize:11,fontWeight:500,display:"flex",alignItems:"center",gap:4},children:["trigger"===t.type?e.jsx(d,{size:12}):e.jsx(c,{size:12}),t.config.label]}),a<i.steps.length-1&&e.jsx(p,{size:14,style:{color:s.muted,transform:"rotate(-90deg)"}})]},t.id))})]},i.id))}),0===g.length&&e.jsxs("div",{style:{textAlign:"center",padding:48,color:s.muted},children:[e.jsx(o,{size:48,style:{opacity:.3,marginBottom:16}}),e.jsx("h3",{style:{color:s.text,marginBottom:8},children:"Henuz otomasyon akisi yok"}),e.jsx("p",{style:{fontSize:14},children:'Ilk otomasyonunuzu olusturmak icin "Yeni Akis" butonunu kullanin.'})]})]})]})};export{g as WorkflowBuilder,g as default};
