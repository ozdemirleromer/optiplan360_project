import{g as e,j as t,S as i,C as r,R as s,T as a,P as n,u as o,a as l,b as d,c as u,d as p,p as m}from"./index-BqsYehSy.js";import{r as c}from"./ui-vendor-X7YeR1nJ.js";import"./react-vendor-BTlmOg1k.js";import"./export-jspdf-ClKeqeik.js";import"./state-CRAppeNE.js";import"./export-xlsx-C5xT2hrF.js";const g=({order:o,onEdit:l,onDragStart:d,isDragging:u})=>{const[p,m]=c.useState(!1),g=e(o.parts,0);return t.jsxs("div",{draggable:!0,onDragStart:()=>null==d?void 0:d(o),onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),onClick:()=>l&&l(o),style:{padding:14,borderRadius:s.lg,cursor:u?"grabbing":"grab",background:p?"rgba(255,255,255,.06)":r.surface,border:`1px solid ${p?r.border2:r.border}`,boxShadow:p?i.md:i.xs,transition:"all .15s ease",transform:p?"translateY(-2px)":"none",opacity:u?.5:1},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[t.jsx("span",{style:{fontFamily:a.fontFamily.mono,fontSize:12,fontWeight:a.fontWeight.semibold,color:r.primary[500]},children:o.id}),t.jsx(n,{priority:o.priority})]}),t.jsx("div",{style:{fontSize:13,fontWeight:a.fontWeight.medium,color:r.text,marginBottom:6},children:o.cust}),t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsxs("span",{style:{fontSize:12,color:r.muted},children:[g," parÃ§a | ",o.thick,"mm"]}),t.jsx("span",{style:{fontSize:10,color:r.gray[400]},children:o.upd})]}),o.mat?t.jsx("div",{style:{marginTop:8,padding:"4px 8px",borderRadius:s.sm,background:"rgba(255,255,255,.03)",fontSize:11,color:r.gray[400],overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.mat}):null]})},x=({onEdit:e})=>{const i=o(e=>e.orders),n=o(e=>e.saveOrder),x=o(e=>e.fetchOrders),[f,y]=c.useState(null),[h,b]=c.useState(null),{addToast:j}=l();d(e=>{"STATION_SCAN"!==e.type&&"ORDER_UPDATED"!==e.type||x()});return t.jsxs("div",{className:"electric-page",children:[t.jsx(u,{title:"Uretim Akisi",subtitle:"Siparislerin asama bazli dagilimi",breadcrumbs:["Ana Islemler","Uretim Akisi"]}),t.jsx("div",{className:"app-page-container",children:t.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(280px,1fr))",gap:14},children:[{id:"new",title:"Yeni",status:"NEW"},{id:"production",title:"Uretimde",status:"IN_PRODUCTION"},{id:"ready",title:"Hazir",status:"READY"},{id:"complete",title:"Tamamlandi",status:"DELIVERED"}].map(o=>{const l=i.filter(e=>e.status===o.status),d=h===o.id&&(null==f?void 0:f.status)!==o.status;return t.jsx(p,{title:`${o.title} (${l.length})`,style:{background:d?m(.15):void 0,borderColor:d?r.primary[500]:void 0,transition:"all .2s ease"},children:t.jsxs("div",{onDragOver:e=>{e.preventDefault(),b(o.id)},onDragLeave:()=>b(null),onDrop:e=>{(async(e,t)=>{if(e.preventDefault(),b(null),!f)return;if(f.status===t)return void y(null);const i={...f,status:t},r=await n(i);r.ok?j(`Siparis durumu "${"NEW"===t?"Yeni":"IN_PRODUCTION"===t?"Uretimde":"READY"===t?"Hazir":"Tamamlandi"}" olarak guncellendi`,"success"):j(`Hata: ${r.message}`,"error");y(null)})(e,o.status)},style:{display:"flex",flexDirection:"column",gap:10,minHeight:120,padding:d?8:0,borderRadius:s.md,transition:"all .2s ease"},children:[l.map(i=>t.jsx(g,{order:i,onEdit:e,onDragStart:y,isDragging:(null==f?void 0:f.id)===i.id},i.id)),0===l.length?t.jsx("div",{style:{textAlign:"center",padding:"20px 10px",border:`1px dashed ${r.border2}`,borderRadius:s.md,color:r.muted,fontSize:12,letterSpacing:".02em",fontWeight:a.fontWeight.medium},children:"Kayit yok"}):null]})},o.id)})})})]})};export{x as Kanban,x as default};
