import{j as s,s as e,c as a,B as i,f as r}from"./index-BqsYehSy.js";import{r as n,S as t,X as l,au as o,av as d,f as c}from"./ui-vendor-X7YeR1nJ.js";import{u as p,a as h}from"./useAIOpsPresentation-CyodkFsC.js";import"./react-vendor-BTlmOg1k.js";import"./export-jspdf-ClKeqeik.js";import"./state-CRAppeNE.js";import"./export-xlsx-C5xT2hrF.js";import"./integrationService-BBjlJOEd.js";import"./paymentService-B1S5G9JA.js";function x(){const[e,a]=n.useState(""),[i,r]=n.useState(!1),o=n.useRef(null);n.useEffect(()=>{const s=s=>{var e,a;(s.ctrlKey||s.metaKey)&&"k"===s.key.toLowerCase()&&(s.preventDefault(),null==(e=o.current)||e.focus(),null==(a=o.current)||a.select())};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[]);const d=n.useMemo(()=>"undefined"!=typeof navigator&&/mac/i.test(navigator.platform)?"Cmd":"Ctrl",[]);return s.jsxs("div",{className:"ai-ops-command-palette "+(i?"is-focused":""),role:"search",children:[s.jsx(t,{size:16,"aria-hidden":"true"}),s.jsx("input",{ref:o,type:"text","aria-label":"Komut Paleti",placeholder:"Komut, siparis veya ajan ara...",value:e,onChange:s=>a(s.target.value),onFocus:()=>r(!0),onBlur:()=>r(!1)}),e?s.jsx("button",{type:"button",className:"ai-ops-command-clear",onClick:()=>{var s;a(""),null==(s=o.current)||s.focus()},"aria-label":"Aramayi temizle",children:s.jsx(l,{size:14,"aria-hidden":"true"})}):s.jsxs("div",{className:"ai-ops-command-kbd",children:[s.jsx("kbd",{children:d}),s.jsx("kbd",{children:"K"})]})]})}function j(s){const e=s.replace("#","");if(6!==e.length)return"6,182,212";return`${Number.parseInt(e.slice(0,2),16)}, ${Number.parseInt(e.slice(2,4),16)}, ${Number.parseInt(e.slice(4,6),16)}`}function m({item:a,index:i=0}){const r={"--metric-color":a.toneColor,"--metric-rgb":j(a.toneColor),"--metric-delay":String(i)};return s.jsxs("article",{className:"ai-ops-metric-card",style:r,children:[s.jsxs("header",{children:[s.jsxs("div",{children:[s.jsx("p",{children:a.title}),s.jsx("strong",{children:a.value})]}),s.jsx("button",{type:"button","aria-label":`${a.title} aksiyonlari`,children:s.jsx(o,{size:14,"aria-hidden":"true"})})]}),s.jsx("div",{className:"ai-ops-metric-chart",children:s.jsx(e,{data:a.sparkData,color:a.toneColor,width:228,height:48})}),s.jsxs("footer",{children:[s.jsx("span",{children:a.hint}),s.jsx("span",{className:"ai-ops-breathing-dot","aria-hidden":"true"})]})]})}function u(s){switch(s){case"confirmed":return"Onaylandı";case"processing":return"Hazırlanıyor";case"queued":return"Kuyrukta";default:return"Beklemede"}}function N({rows:e}){return s.jsx("div",{className:"ai-ops-orders-table-wrap",children:s.jsxs("table",{className:"ai-ops-orders-table",role:"table","aria-label":"Sipariş listesi",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Sipariş"}),s.jsx("th",{children:"İstasyon"}),s.jsx("th",{children:"Durum"}),s.jsx("th",{children:"Tahmini Süre"}),s.jsx("th",{"aria-label":"Aksiyonlar"})]})}),s.jsx("tbody",{children:e.map(e=>s.jsxs("tr",{tabIndex:0,children:[s.jsxs("td",{children:[s.jsx("strong",{children:e.id}),s.jsx("span",{children:e.name})]}),s.jsx("td",{children:e.station}),s.jsx("td",{children:s.jsx("span",{className:`ai-ops-status-pill ai-ops-status-${e.status}`,children:u(e.status)})}),s.jsx("td",{children:e.eta}),s.jsx("td",{children:s.jsxs("div",{className:"ai-ops-order-actions",children:[s.jsx("button",{type:"button","aria-label":`${e.id} düzenle`,children:s.jsx(d,{size:13,"aria-hidden":"true"})}),s.jsx("button",{type:"button","aria-label":`${e.id} sil`,children:s.jsx(c,{size:13,"aria-hidden":"true"})})]})})]},e.id))})]})})}function v({runningJobs:e,queueCount:a,warningCount:i}){const r=i>0;return s.jsxs("div",{className:"ai-ops-flow-board",children:[s.jsxs("svg",{viewBox:"0 0 860 320",className:"ai-ops-flow-lines","aria-hidden":"true",children:[s.jsx("path",{className:"ai-ops-flow-path",d:"M150 160 C 250 160, 260 72, 360 72"}),s.jsx("path",{className:"ai-ops-flow-path",d:"M150 160 C 240 160, 255 160, 360 160"}),s.jsx("path",{className:"ai-ops-flow-path",d:"M150 160 C 250 160, 260 252, 360 252"}),s.jsx("path",{className:"ai-ops-flow-path",d:"M480 72 C 585 72, 595 160, 700 160"}),s.jsx("path",{className:"ai-ops-flow-path",d:"M480 160 C 585 160, 595 160, 700 160"}),s.jsx("path",{className:"ai-ops-flow-path",d:"M480 252 C 585 252, 595 160, 700 160"})]}),s.jsxs("div",{className:"ai-ops-flow-node ai-ops-node-source ai-ops-node-core",children:[s.jsx("strong",{children:"AI Çekirdek"}),s.jsxs("span",{children:[e," aktif görev"]})]}),s.jsxs("div",{className:"ai-ops-flow-node ai-ops-node-1",children:[s.jsx("strong",{children:"İstasyon 1"}),s.jsx("span",{children:"Beceri Katmanı"})]}),s.jsxs("div",{className:"ai-ops-flow-node ai-ops-node-2",children:[s.jsx("strong",{children:"İstasyon 2"}),s.jsx("span",{children:"Alt Ajan"})]}),s.jsxs("div",{className:"ai-ops-flow-node ai-ops-node-3",children:[s.jsx("strong",{children:"İstasyon 3"}),s.jsxs("span",{children:["Queue: ",a]})]}),s.jsxs("div",{className:"ai-ops-drop-zone ai-ops-drop-target "+(r?"is-warning":""),"aria-live":"polite",children:[s.jsx("strong",{children:"Bırakma Alanı"}),s.jsx("span",{children:r?`${i} uyarılı paket`:"Sürükle bırak hazır"})]}),s.jsx("div",{className:"ai-ops-flow-minimap","aria-hidden":"true",children:s.jsxs("svg",{viewBox:"0 0 180 96",children:[s.jsx("rect",{x:"2",y:"2",width:"176",height:"92",rx:"10"}),s.jsx("circle",{cx:"24",cy:"48",r:"6"}),s.jsx("circle",{cx:"78",cy:"20",r:"5"}),s.jsx("circle",{cx:"78",cy:"48",r:"5"}),s.jsx("circle",{cx:"78",cy:"76",r:"5"}),s.jsx("rect",{x:"130",y:"38",width:"26",height:"18",rx:"4"}),s.jsx("path",{d:"M30 48 C 40 48, 48 20, 72 20"}),s.jsx("path",{d:"M30 48 C 48 48, 55 48, 72 48"}),s.jsx("path",{d:"M30 48 C 40 48, 48 76, 72 76"}),s.jsx("path",{d:"M84 20 C 98 20, 110 48, 130 48"}),s.jsx("path",{d:"M84 48 C 98 48, 110 48, 130 48"}),s.jsx("path",{d:"M84 76 C 98 76, 110 48, 130 48"})]})})]})}function f(){const{stats:e,activityFeed:n,loading:t,partialError:l,reload:o}=p(),{integrationToneLabel:d,badgeVariant:c,metricCards:j,missionOrders:u,riskItems:f}=h(e);return s.jsxs("div",{className:"ai-ops-shell",children:[s.jsx(a,{title:"Optiplan360 AI Orkestrasyon Merkezi",subtitle:"Kontrol paneli: sipariş, ajan, entegrasyon ve istasyon akışlarını tek ekranda yönet",breadcrumbs:["İzleme","AI Ops"],centerContent:s.jsx(x,{}),children:s.jsx(i,{variant:"secondary",size:"sm",onClick:o,disabled:t,children:t?"Yukleniyor...":"Yenile"})}),s.jsxs("div",{className:"ai-ops-content-wrap",children:[l?s.jsxs("div",{className:"ai-ops-alert",children:[s.jsx("span",{className:"ai-ops-alert-dot"}),l]}):null,s.jsxs("div",{className:"ai-ops-bento",children:[s.jsxs("section",{className:"ai-ops-panel ai-ops-panel-kpi",children:[s.jsxs("header",{className:"ai-ops-panel-head",children:[s.jsx("h3",{children:"KPI / Beceri Katmanı"}),s.jsxs("div",{className:"ai-ops-panel-meta",children:[s.jsx(r,{variant:c,children:d}),s.jsxs("span",{className:"ai-ops-last-sync",children:["Senk: ",e.lastSync]})]})]}),s.jsx("div",{className:"ai-ops-kpi-grid",children:j.map((e,a)=>s.jsx(m,{item:e,index:a},e.id))})]}),s.jsxs("section",{className:"ai-ops-panel ai-ops-panel-feed",children:[s.jsxs("header",{className:"ai-ops-panel-head",children:[s.jsx("h3",{children:"AI Çekirdek Canlı Akış"}),s.jsxs("div",{className:"ai-ops-core-pill",children:[s.jsx("span",{className:"ai-ops-core-pulse"}),"AKTİF"]})]}),s.jsx("div",{className:"ai-ops-feed-list",children:n.map((e,a)=>s.jsxs("article",{className:"ai-ops-feed-item",children:[s.jsx("span",{className:`ai-ops-feed-dot ai-ops-feed-${e.tone}`}),s.jsxs("div",{children:[s.jsx("strong",{children:e.title}),s.jsx("p",{children:e.detail})]})]},`${e.title}-${a}`))})]}),s.jsxs("section",{className:"ai-ops-panel ai-ops-panel-orders",children:[s.jsxs("header",{className:"ai-ops-panel-head",children:[s.jsx("h3",{children:"Siparişler"}),s.jsx("button",{type:"button",className:"ai-ops-ghost-btn",children:"Detay Göster"})]}),s.jsx(N,{rows:u})]}),s.jsxs("section",{className:"ai-ops-panel ai-ops-panel-flow",children:[s.jsxs("header",{className:"ai-ops-panel-head",children:[s.jsx("h3",{children:"İstasyon Akış Orkestratörü"}),s.jsx("span",{className:"ai-ops-flow-status",children:"Bırakma Alanı Hazır"})]}),s.jsx(v,{runningJobs:e.integrationsRunning,queueCount:e.integrationsOutbox,warningCount:e.integrationsErrors})]})]}),s.jsx("section",{className:"ai-ops-risk-strip",children:f.map(e=>s.jsxs("div",{className:`ai-ops-risk-item ai-ops-risk-${e.tone}`,children:[s.jsx("span",{children:e.label}),s.jsx("strong",{children:e.value})]},e.label))})]})]})}export{f as AIOpsDashboard};
